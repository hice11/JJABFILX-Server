<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.group.jjabflix.user.dao.UserMapper">
  <insert id="insertUser" parameterType="User">
    INSERT INTO `jabflix_db`.`user`
    (`email`, `password`, `phone_number`, `name`, `birth`, `created_at`, `role`)
    VALUES
      (#{email}, #{password}, #{phoneNumber}, #{name}, #{birth}, now(), #{role});
  </insert>

  <select id="selectUserByEmail" parameterType="String" resultType="User">
    select `user`.`user_id`,
           `user`.`email`,
           `user`.`password`,
           `user`.`phone_number`,
           `user`.`name`,
           `user`.`birth`,
           `user`.`membership`,
           `user`.`status`,
           `user`.`card_number`,
           `user`.`card_expiration_date`,
           `user`.`paid_at`,
           `user`.`created_at`,
           `user`.`withdraw_at`,
           `user`.`role`
    from `jabflix_db`.`user`
    where `user`.`email` = #{email};
  </select>
</mapper>